# æµ‹è¯•è„šæœ¬ä½¿ç”¨è¯´æ˜

## æ¦‚è¿°

ä¸ºäº†æ–¹ä¾¿æµ‹è¯• Lingualink Core çš„æ–‡æœ¬ç¿»è¯‘åŠŸèƒ½ï¼Œæˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªæµ‹è¯•è„šæœ¬ï¼š

1. `test_text_local.sh` - å®Œæ•´çš„æ–‡æœ¬ç¿»è¯‘æµ‹è¯•è„šæœ¬
2. `test_text_simple.sh` - ç®€åŒ–çš„å¿«é€Ÿæµ‹è¯•è„šæœ¬

## è„šæœ¬è¯´æ˜

### test_text_local.sh (å®Œæ•´ç‰ˆ)

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•è„šæœ¬ï¼Œä»¿ç…§ `test_audio_local.sh` çš„æ ·å¼ç¼–å†™ï¼ŒåŒ…å«ï¼š

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- âœ… å®Œæ•´çš„ä¾èµ–æ£€æŸ¥ï¼ˆjq, curlï¼‰
- âœ… æœåŠ¡çŠ¶æ€æ£€æŸ¥
- âœ… å¤šç§æµ‹è¯•åœºæ™¯è¦†ç›–
- âœ… è¯¦ç»†çš„å“åº”è§£æ
- âœ… å½©è‰²è¾“å‡ºå’Œæ—¥å¿—
- âœ… é”™è¯¯å¤„ç†å’Œè¯Šæ–­å»ºè®®

**æµ‹è¯•åœºæ™¯ï¼š**
1. ä¸­æ–‡ç¿»è¯‘æˆè‹±æ–‡
2. ä¸­æ–‡ç¿»è¯‘æˆæ—¥æ–‡
3. ä¸­æ–‡ç¿»è¯‘æˆå¤šç§è¯­è¨€
4. è‹±æ–‡ç¿»è¯‘æˆä¸­æ–‡ï¼ˆæŒ‡å®šæºè¯­è¨€ï¼‰
5. æ—¥æ–‡ç¿»è¯‘æˆä¸­æ–‡å’Œè‹±æ–‡
6. é•¿æ–‡æœ¬ç¿»è¯‘æµ‹è¯•
7. ç¹ä½“ä¸­æ–‡ç¿»è¯‘
8. ä¸“ä¸šæœ¯è¯­ç¿»è¯‘
9. ç©ºæ–‡æœ¬é”™è¯¯æµ‹è¯•
10. æ— ç›®æ ‡è¯­è¨€é”™è¯¯æµ‹è¯•

### test_text_simple.sh (ç®€åŒ–ç‰ˆ)

è¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿæµ‹è¯•è„šæœ¬ï¼Œé€‚åˆæ—¥å¸¸éªŒè¯ï¼š

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- âœ… å¿«é€ŸéªŒè¯æ ¸å¿ƒåŠŸèƒ½
- âœ… ç®€æ´çš„è¾“å‡ºæ ¼å¼
- âœ… åŸºæœ¬çš„é”™è¯¯æ£€æŸ¥

**æµ‹è¯•åœºæ™¯ï¼š**
1. ä¸­æ–‡â†’è‹±æ–‡
2. è‹±æ–‡â†’ä¸­æ–‡
3. æ—¥æ–‡â†’è‹±æ–‡

## ä½¿ç”¨æ–¹æ³•

### 1. ç¡®ä¿æœåŠ¡è¿è¡Œ

```bash
# å¯åŠ¨æœåŠ¡
go run cmd/server/main.go
```

### 2. è¿è¡Œå®Œæ•´æµ‹è¯•

```bash
# è¿è¡Œå®Œæ•´çš„æ–‡æœ¬ç¿»è¯‘æµ‹è¯•
./test_text_local.sh
```

### 3. è¿è¡Œå¿«é€Ÿæµ‹è¯•

```bash
# è¿è¡Œå¿«é€Ÿæµ‹è¯•
./test_text_simple.sh
```

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è‡ªå®šä¹‰é…ç½®ï¼š

```bash
# è‡ªå®šä¹‰æœåŠ¡åœ°å€
export BASE_URL="http://your-server:8080"

# è‡ªå®šä¹‰APIå¯†é’¥
export API_KEY="your-api-key"

# è¿è¡Œæµ‹è¯•
./test_text_local.sh
```

### è„šæœ¬å†…é…ç½®

ä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹è„šæœ¬å¼€å¤´çš„é…ç½®ï¼š

```bash
# åœ¨è„šæœ¬ä¸­ä¿®æ”¹è¿™äº›å˜é‡
BASE_URL="http://localhost:8080"
API_KEY="test-api-key"
```

## è¾“å‡ºç¤ºä¾‹

### æˆåŠŸè¾“å‡ºç¤ºä¾‹

```
ğŸ“ Lingualink Core æ–‡æœ¬ç¿»è¯‘æµ‹è¯•
=================================

[INFO] æ£€æŸ¥ä¾èµ–å·¥å…·...
[SUCCESS] ä¾èµ–å·¥å…·æ£€æŸ¥å®Œæˆ

[INFO] æ£€æŸ¥æœåŠ¡çŠ¶æ€...
[SUCCESS] æœåŠ¡æ­£åœ¨è¿è¡Œ

ğŸ§ª å¼€å§‹æ–‡æœ¬ç¿»è¯‘æµ‹è¯•
====================

[INFO] æµ‹è¯•: ä¸­æ–‡ç¿»è¯‘æˆè‹±æ–‡
æ–‡æœ¬: ä½ å¥½ï¼Œä¸–ç•Œï¼è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬ã€‚
ç›®æ ‡è¯­è¨€: en
çŠ¶æ€ç : 200
å¤„ç†æ—¶é—´: 1.234s
[SUCCESS] âœ… è¯·æ±‚æˆåŠŸ

ğŸ“‹ è§£æç»“æœ:
- è¯·æ±‚ID: txt_1704067200123456
- çŠ¶æ€: success
- æºæ–‡æœ¬: ä½ å¥½ï¼Œä¸–ç•Œï¼è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡æœ¬ã€‚
- ç¿»è¯‘ç»“æœ:
  en: Hello, world! This is a test text.
```

### é”™è¯¯è¾“å‡ºç¤ºä¾‹

```
[INFO] æµ‹è¯•: ç©ºæ–‡æœ¬é”™è¯¯æµ‹è¯•
æ–‡æœ¬: 
ç›®æ ‡è¯­è¨€: en
çŠ¶æ€ç : 400
å¤„ç†æ—¶é—´: 0.123s
[ERROR] âŒ è¯·æ±‚å¤±è´¥ (HTTP 400)
é”™è¯¯ä¿¡æ¯:
{"error": "text is required"}
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æœåŠ¡æœªè¿è¡Œ**
   ```
   [ERROR] æœåŠ¡æœªè¿è¡Œï¼Œè¯·å…ˆå¯åŠ¨æœåŠ¡: go run cmd/server/main.go
   ```
   è§£å†³ï¼šå¯åŠ¨ Lingualink Core æœåŠ¡

2. **ä¾èµ–å·¥å…·ç¼ºå¤±**
   ```
   [ERROR] jq æœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…: sudo apt-get install jq æˆ– brew install jq
   ```
   è§£å†³ï¼šå®‰è£… jq å·¥å…·

3. **è®¤è¯å¤±è´¥**
   ```
   [ERROR] âŒ è¯·æ±‚å¤±è´¥ (HTTP 401)
   ```
   è§£å†³ï¼šæ£€æŸ¥ API_KEY é…ç½®

4. **ç¿»è¯‘å¤±è´¥**
   ```
   [ERROR] âŒ è¯·æ±‚å¤±è´¥ (HTTP 500)
   ```
   è§£å†³ï¼šæ£€æŸ¥ LLM åç«¯é…ç½®å’ŒæœåŠ¡çŠ¶æ€

### è°ƒè¯•æ­¥éª¤

1. **æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€**
   ```bash
   curl http://localhost:8080/api/v1/health
   ```

2. **æŸ¥çœ‹æœåŠ¡æ—¥å¿—**
   ```bash
   tail -f ./logs/app.log
   ```

3. **éªŒè¯é…ç½®æ–‡ä»¶**
   ```bash
   cat config/config.yaml
   ```

4. **æµ‹è¯• LLM åç«¯**
   ```bash
   curl $VLLM_SERVER_URL/v1/models
   ```

## æ‰©å±•æµ‹è¯•

### æ·»åŠ è‡ªå®šä¹‰æµ‹è¯•

å¯ä»¥åœ¨è„šæœ¬ä¸­æ·»åŠ è‡ªå®šä¹‰æµ‹è¯•åœºæ™¯ï¼š

```bash
# æ·»åŠ åˆ° test_text_local.sh ä¸­
test_text_translation "ä½ çš„æµ‹è¯•æ–‡æœ¬" "ç›®æ ‡è¯­è¨€" "æµ‹è¯•æè¿°" "æºè¯­è¨€(å¯é€‰)"
```

### æ‰¹é‡æµ‹è¯•

å¯ä»¥åˆ›å»ºæµ‹è¯•æ–‡æœ¬æ–‡ä»¶è¿›è¡Œæ‰¹é‡æµ‹è¯•ï¼š

```bash
# åˆ›å»ºæµ‹è¯•æ–‡ä»¶
echo "æµ‹è¯•æ–‡æœ¬1" > test_texts.txt
echo "æµ‹è¯•æ–‡æœ¬2" >> test_texts.txt

# æ‰¹é‡æµ‹è¯•ï¼ˆéœ€è¦è‡ªå·±å®ç°å¾ªç¯ï¼‰
while read -r text; do
    test_text_translation "$text" "en" "æ‰¹é‡æµ‹è¯•"
done < test_texts.txt
```

## æ³¨æ„äº‹é¡¹

1. **æ–‡æœ¬é•¿åº¦é™åˆ¶**ï¼šå•æ¬¡è¯·æ±‚æ–‡æœ¬é•¿åº¦ä¸è¶…è¿‡ 10000 å­—ç¬¦
2. **å¹¶å‘é™åˆ¶**ï¼šé¿å…åŒæ—¶è¿è¡Œå¤šä¸ªæµ‹è¯•è„šæœ¬
3. **ç½‘ç»œè¶…æ—¶**ï¼šå¦‚æœç½‘ç»œè¾ƒæ…¢ï¼Œå¯èƒ½éœ€è¦å¢åŠ è¶…æ—¶æ—¶é—´
4. **å­—ç¬¦ç¼–ç **ï¼šç¡®ä¿ç»ˆç«¯æ”¯æŒ UTF-8 ç¼–ç ä»¥æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡

## æ›´æ–°æ—¥å¿—

- **v1.0** - åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æŒåŸºæœ¬çš„æ–‡æœ¬ç¿»è¯‘æµ‹è¯•
- **v1.1** - æ·»åŠ é”™è¯¯æµ‹è¯•åœºæ™¯å’Œæ›´è¯¦ç»†çš„è¾“å‡ºè§£æ
- **v1.2** - æ·»åŠ ç®€åŒ–ç‰ˆæµ‹è¯•è„šæœ¬
